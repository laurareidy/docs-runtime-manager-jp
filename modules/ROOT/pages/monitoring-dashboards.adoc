= ダッシュボードの監視
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: cloudhub, 分析, 監視, インサイト, filter

image:logo-cloud-active.png[link="/runtime-manager/deployment-strategies", title="CloudHub"]
image:logo-hybrid-active.png[link="/runtime-manager/deployment-strategies", title="ハイブリッドデプロイメント"]
image:logo-server-disabled.png[link="/runtime-manager/deployment-strategies", title="Anypoint Platform Private Cloud Edition"]
image:logo-pcf-disabled.png[link="/runtime-manager/deployment-strategies", title="Pivotal Cloud Foundry"]

[NOTE]
ダッシュボードを表示するには、ユーザは目的のリソースの​*「Read Application (アプリケーションの参照)」*​または​*「Read Servers (サーバの参照)」*​権限を持っている必要があります。

ダッシュボードには、デプロイされたアプリケーションとデプロイ先のシステムの両方の使用量メトリクスの詳細が表示されます。

ダッシュボードは、統合されたアプリケーションに関する次のような質問に答えるのに役立ちます。

* 使用量のピークが発生したのいつか?
* 高トラフィックのピークが応答時間に与える影響は?
* アプリケーションの背後の処理能力はこれらのピークに適切に対処できているか?
* 高トラフィックのピークがメッセージの失敗率に与える影響は?
* 同じサーバで実行されている他のアプリケーションの高トラフィックのピークが、特定のアプリケーションのパフォーマンスに与える影響は?

​*ダッシュボード*​を使用して、アプリケーションのメトリクスの推移を表示できます。さらに、各アプリケーションの xref:insight.adoc[[Insight (インサイト)]] セクションをドリルダウンして、個々のトランザクションの結果を調べて失敗の根本的原因を分析したり、パフォーマンスのボトルネックを特定したり、会社の手順に準拠しているかをテストしたりできます。

== CloudHub にあるアプリケーションのダッシュボード

=== ダッシュボードへのアクセス

CloudHub のアプリケーションのダッシュボードにアクセスする手順は、次のとおりです。

. *[Applications (アプリケーション)]* ページでアプリケーションを選択し、サイドパネルを開きます。
. *[Manage Application (アプリケーションを管理)]* ボタンをクリックします。
+
image::dashboards-a2810.png[]
. 左側の *[Dashboard (ダッシュボード)]* セクションを選択します。

=== ダッシュボードの操作

ダッシュボードには、3 つのメトリクスのグラフが表示されます。

* Mule messages (Mule メッセージ)
* CPU usage (CPU 使用量) (最大量に対する割合)
* Memory usage (メモリ使用量)

すべてのグラフは、右上隅にある目的の期間を選択することで、異なる時間単位で表示できます。

image::dashboards-a7117.png[]

アプリケーションが同時に複数のワーカーで実行される場合、異なる色で区別した曲線として、同じグラフ上に表示されます。

グラフの任意の点の上にカーソルを置くと、その時点のアクティビティに関する数値の詳細がフロート表示されます。

image::dashboards-b8c8c.png[]

[TIP]
xref:alerts-on-runtime-manager.adoc#conditions-on-cloudhub-applications[アラート]をセットアップし、いずれかのメトリクスが長時間にわたって重大値を示すと自動的に通知されるようにします。

== サーバにあるアプリケーションのダッシュボード

////
[NOTE]
The Anypoint Platform Private Cloud Edition doesn't currently support the dashboard feature.
////

=== ダッシュボードへのアクセス

オンプレミスのアプリケーションのダッシュボードにアクセスする手順は、次のとおりです。

. *[Applications (アプリケーション)]* ページでアプリケーションを選択し、サイドパネルを開きます。
. *[Manage Application (アプリケーションを管理)]* ボタンをクリックします。
+
image::dashboards-a2810.png[]
+
. 左側の *[Dashboard (ダッシュボード)]* セクションを選択します。

アプリケーションを実行するサーバのダッシュボードを最初に開き、アプリケーションの名前のハイパーリンクをクリックして、このダッシュボードにドリルダウンすることもできます。

=== ダッシュボードの操作

ダッシュボードには、3 つのメトリクスのグラフが表示されます。

* Mule messages (Mule メッセージ)
* Error rate (エラー率)
* Response time (応答時間)

image::monitoring-dashboards-f8368.png[]

すべてのグラフは、右上隅にある目的の期間を選択することで、異なる時間単位で表示できます。

image::monitoring-dashboards-cbd92.png[]

アプリケーションがクラスタまたはサーバグループで実行される場合、含まれているサーバセット全体でメトリクスが集約され、1 本の折れ線として表示されます。

[TIP]
アプリケーションをクラスタまたはサーバグループで実行し、これらの同じメトリクスを個々のサーバレベルで分析したものを表示するには、個々のサーバのダッシュボードを参照してください。サーバで複数のアプリケーションが実行中の場合、表示されるのはサーバの総合的なパフォーマンスで、実行中のアプリケーションごとに区別されません。

グラフの任意の点の上にカーソルを置くと、その時点のアクティビティに関する数値の詳細がフロート表示されます。

image::monitoring-dashboards-fad4e.png[]

[TIP]
xref:alerts-on-runtime-manager.adoc#conditions-on-locally-deployed-applications[アラート]をセットアップし、いずれかのメトリクスが長時間にわたって重大値を示すと自動的に通知されるようにします。

== サーバのダッシュボード

[NOTE]
Anypoint Platform Private Cloud Edition ではダッシュボード機能がサポートされていません。

=== ダッシュボードへのアクセス

オンプレミスのサーバのダッシュボードにアクセスする手順は、次のとおりです。

. *[Servers (サーバ)]* ページでサーバを選択し、サイドパネルを開きます。
. *[View Details (詳細を表示)]* ボタンをクリックします。
. 左側の *[Dashboard (ダッシュボード)]* セクションを選択します。

サーバを含むクラスタまたはサーバグループのダッシュボードを最初に開き、サーバの名前のハイパーリンクをクリックして、このダッシュボードにドリルダウンすることもできます。

image::monitoring-dashboards-server.png[]

=== ダッシュボードの操作

ダッシュボードには、複数のメトリクスが次の 2 つのペインに分かれて表示されます。

* *概要*
* *Breakdown (詳細分析)*

すべてのグラフは、右上隅にある目的の期間を選択することで、異なる時間単位で表示できます。

image::monitoring-dashboards-cbd92.png[]

グラフの任意の点の上にカーソルを置くと、その時点のアクティビティに関する数値の詳細がフロート表示されます。

image::monitoring-dashboards-hover.png[]


サーバで複数のアプリケーションが実行されている場合、1 つまたは複数を選択し、別々のグラフセットにそれらのパフォーマンスを表示できます。そのために 1 つまたは複数を選択すると、右側のサイドパネルに次のデータが表示されます。

image::monitoring-dashboards-39935.png[]



[TIP]
xref:alerts-on-runtime-manager.adoc#conditions-on-mule-servers[アラート]をセットアップし、いずれかのメトリクスが長時間にわたって重大値を示すと自動的に通知されるようにします。

=== サーバダッシュボードのメトリクス

このダッシュボードのグラフには、メモリと CPU の使用量に関連するさまざまなメトリクスが表示されます。*[Overview (概要)]* タブでこれら 2 つを概要レベルで参照するか、*[Breakdown (詳細分析)]* で掘り下げて、メモリの各部分を個別に追跡する詳細な一連のメトリクスを参照できます。


概要レベルでは、メモリは JVM ヒープの内部にあるものと外部にあるものに分けて考えることができます。

ヒープとは、すべての Java オブジェクトが保存されている領域です。ヒープは JVM のスタートアップ時に作成され、そこに含まれているアプリケーションを中断せずにサイズを拡大または縮小することができます。ヒープがいっぱいになると、ガベージが収集されます。ガベージコレクション時に、使用されていないオブジェクトがクリアされ、新しいオブジェクト用に領域を作り出します。

非ヒープメモリには、ランタイム定数プール、項目およびメソッドデータ、メソッドおよびコンストラクタのコードなど、クラスごとの構造が保存されます。

メモリ使用量レベルを表示する、このダッシュボードのグラフは、*[Overview (概要)]* と *[Breakdown (詳細分析)]* の両方のタブで次の 3 つの値を追跡します。

* *Used (使用)* - 現在使用中のメモリの量 (MB 単位)。
* *Committed (コミット済み)* - Java VM で使用できるように確保されたメモリの量 (MB 単位)。この量は時間が経つにつれ変化します。コミット済みメモリの量は、常に使用メモリの量以上になります。
* *Total (合計)* - 使用可能なメモリの最大量 (MB 単位)。この量は変化するか、未定義の場合があります。メモリの割り当ては、Java VM が使用メモリを増量してコミット済みメモリよりも大きくしようとすると、使用量が合計未満であっても失敗する場合があります。


=== ヒープメモリ

*[Overview (概要)]* タブにあるこのメトリクスは、合計ヒープメモリ使用量 (MB 単位) を指します。各構成要素の詳細は、<<Breakdown Tab,[Breakdown (詳細分析)] タブ>>を参照してください。

image::monitoring-dashboards-heap.png[]

* ヒープメモリの使用量
* コミット済みヒープメモリ
* メモリ合計

=== CPU

*[Overview (概要)]* タブにあるこのメトリクスは、サーバの合計 CPU 使用量を指し、割合で表されます。

image::monitoring-dashboards-cpu.png[]

* CPU 使用量
* システムの利用可能な処理能力
* システムの負荷平均

+
[NOTE]
Windows では使用できません。

=== Thread Count (スレッド数)

このグラフには、個々のスレッドの数が経時的に表示されます。

image::monitoring-dashboards-threads.png[]

ここでのスレッドは、Java の実行スレッドを指します。JVM では、アプリケーションで複数の実行スレッドを同時に実行できます。


=== ガベージコレクション


JVM では、2 つのフェーズから成る、ガベージコレクションのマークアンドスイープ方式アルゴリズムが実装されます。
マークフェーズと呼ばれる第 1 フェーズでは、すべてのアクセス可能なオブジェクトを検出し、マークします。ガベージコレクションアルゴリズムの第 2 フェーズでは、ヒープをスキャンし、マークされていないオブジェクトをすべて解放します。このフェーズは、スイープフェーズと呼ばれます。

image::monitoring-dashboards-garbage.png[]

=== Class Loading (クラスローディング)

Class Loading (クラスローディング) グラフには、JVM にあるすべてのアプリケーションを合計した、現在ロード済みまたはロード中のクラスの量が表示されます。

image::monitoring-dashboards-classloading.png[]

=== ヒープメモリのメトリクス

次のメトリクスは、JVM ヒープを構成するサーバメモリ部分に関連します。

==== Par Eden / Eden Space (Par Eden / Eden 領域)

ほとんどのオブジェクトに最初に割り当てられるメモリが含まれているヒープ領域内のプール。

image::monitoring-dashboards-eden.png[]

==== Par Survivor / Survivor Space (Par Survivor / Survivor 領域)

Eden 領域のガベージコレクションを耐え抜いたオブジェクトが含まれているヒープ内のプール。

image::monitoring-dashboards-survivor.png[]

==== Tenured Generation (Tenured 世代)

Survivor 領域内にしばらく存在したオブジェクトが含まれているヒープ内のプール。

image::monitoring-dashboards-tenure.png[]

=== 非ヒープメモリのメトリクス

次のメトリクスは、JVM ヒープの外側に存在するメモリを指します。

==== Code Cache (コードキャッシュ)

この非ヒープ領域には、ネイティブコードのコンパイルと保存に使用されるメモリが含まれています。

image::monitoring-dashboards-cahce.png[]

==== Compressed Class Space (圧縮クラス領域)

[NOTE]
JDK 8+ を使用する場合にのみ使用できます。

image::monitoring-dashboards-class-space.png[]

==== Metaspace

クラスのメタデータの表現にネイティブメモリが使用される JVM のメモリ領域。
JDK 8+ を使用する場合にのみ使用できます。

image::monitoring-dashboards-meta.png[]

== クラスタまたはサーバグループのダッシュボード

=== ダッシュボードへのアクセス

オンプレミスのクラスタまたはサーバグループのダッシュボードにアクセスする手順は、次のとおりです。

. *[Servers (サーバ)]* ページでサーバを選択し、サイドパネルを開きます。
. *[View Details (詳細を表示)]* ボタンをクリックします。
. 左側の *[Dashboard (ダッシュボード)]* セクションを選択します。

=== ダッシュボードの操作

ダッシュボードには、3 つのメトリクスが表示されます。

* CPU usage (CPU 使用量) (最大量に対する割合)
* Memory usage (メモリ使用量) (MB 単位)
* Heap total (ヒープ合計) (MB 単位)

image::monitoring-dashboards-5cd3c.png[]

すべてのグラフは、右上隅にある目的の期間を選択することで、異なる時間単位で表示できます。

image::monitoring-dashboards-cbd92.png[]

含まれているサーバセット全体でメトリクスが集約され、1 本の折れ線としてメインのグラフセットに表示されます。

この情報を、個々のサーバかアプリケーションのいずれかで分析でき、視点を選択できる 2 つのタブがあります。

image::monitoring-dashboards-6fe9f.png[]

次に、1 つまたは複数のサーバかアプリケーションを選択すると、右側のサイドパネルにこのデータが表示されます。

また、このメニューから個々のサーバ名をクリックして、<<The Dashboard for a Server,そのサーバ>>のダッシュボードに移動することもできます。

[TIP]
xref:alerts-on-runtime-manager.adoc#conditions-on-mule-servers[アラート]をセットアップし、いずれかのメトリクスが長時間にわたって重大値を示すと自動的に通知されるようにします。

== 関連情報

* xref:insight.adoc[「インサイト」]を参照してください。これはトランザクションレベルの詳細を調べるツールです。
* xref:managing-deployed-applications.adoc[デプロイ済みアプリケーションの管理]
* xref:managing-applications-on-cloudhub.adoc[CloudHub でのアプリケーションの管理]
* xref:deploying-to-cloudhub.adoc[CloudHub へのデプロイ]
* xref:cloudhub.adoc[CloudHub] の概要とその機能についての詳細
* xref:monitoring.adoc[アプリケーションの監視]
* xref:cloudhub-fabric.adoc[CloudHub Fabric]
* xref:anypoint-platform-cli.adoc[コマンドラインツール]
