= Runtime Manager を使用したクラスタの作成 (ハイブリッド)
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

== 前提条件

クラスタを作成する前に、以下の手順を実行してください。

* Mule バージョン 3.6 以降または API ゲートウェイランタイムバージョン 2.0 以降をインストールします。
* Runtime Manager エージェントバージョン 1.1.1 以降をインストールします。
* クラスタに含める各 Mule 用のサーバを作成します。

クラスタを作成する場合、次の考慮事項にも注意してください。

* 新しいクラスタを作成するために選択したサーバに、​*すでにデプロイされているアプリケーション*​を含めることはできません。

* マルチキャストサーバの状況は *[Running (実行中)]* または *[Disconnected (切断済み)]* とすることができますが、ユニキャストサーバの状況は *[Running (実行中)]* のみでなければなりません。 

* クラスタ内のすべてのサーバが同じ Mule Runtime Engine バージョンと Runtime Manager エージェントバージョンを実行している必要があります。

クラスタのすべてのサーバでオブジェクトストアの永続性を保持する必要がある場合、クラスタを手動で作成し、クォーラム管理を使用する必要があります。

== クラスタの作成

. Anypoint Platform から *[Runtime Manager]* をクリックします。
. *[Servers (サーバ)]* タブをクリックします。
. すべてのサーバが [Servers (サーバ)] リストに表示されていることを確認します。
. *[Create Cluster (クラスタを作成)]* をクリックします。クラスタにはどのような状況のサーバも追加できます。
+
image::serverstatus-no-cluster-allonline.png[すべてのサーバ]

. クラスタの名前を入力します。
+
クラスタ名には次の制限が適用されます。
+
* ダッシュを先頭または末尾で使用してはならない
* 3 文字以上にする必要がある
* 40 を超える文字を含むことはできない
* 一意である必要がある
* 文字、数字、ダッシュのみを含む必要がある

. *[Multicast (マルチキャスト)]* または *[Unicast (ユニキャスト)]* を選択します。
. クラスタに追加するサーバの名前のチェックボックスをオンにします。
. *[Create Cluster (クラスタを作成)]* をクリックします。
+
image::createcluster-multicast.png[CreateACluster]

. クラスタ名をクリックして、クラスタの詳細を表示します。このビューでは、他のサーバの追加、サーバの削除、クラスタの削除もできます。
+
image::addingservertocluster-sidepanel.png[ClusterDetail]

== 関連情報:

* xref:cluster-about.adoc[クラスタについて]
* xref:3.8@mule-runtime::creating-and-managing-a-cluster-manually.adoc#object-store-persistence[オブジェクトストアの永続性]
* xref:3.8@mule-runtime::creating-and-managing-a-cluster-manually.adoc#quorum-management[クォーラム管理]
