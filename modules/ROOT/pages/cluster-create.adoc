= Runtime Manager を使用したクラスタの作成 (ハイブリッド)
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

== 前提条件

クラスタを作成するためには以下の準備が必要です。

* Mule バージョン 3.6 以降または API ゲートウェイランタイムバージョン 2.0 以降をインストールします。
* Runtime Manager エージェントバージョン 1.1.1 以降をインストールします。
* クラスタに含める各 Mule 用のサーバを作成します。

[NOTE]
--
* 以前にデプロイ済みのアプリケーションが存在するサーバや、別のクラスタやグループに属するサーバを新規クラスタ用に選択することはできません。
* マルチキャストサーバの状況は *[Running (実行中)]* または *[Disconnected (切断済み)]* でも構いませんが、ユニキャストサーバの状況は *[Running (実行中)]* のみでなければなりません。 
* クラスタ内のすべてのサーバが同じ Mule Runtime Engine バージョンと Runtime Manager エージェントバージョンを実行している必要があります。
* クラスタのすべてのサーバでオブジェクトストアの永続性を保持する場合は、クラスタを手動で作成し、クォーラム管理を使用する必要があります。
--

== クラスタの作成

. Anypoint Platform にサインインし、*[Runtime Manager]* をクリックします。
. *[Servers (サーバ)]* タブをクリックします。 +
クラスタに追加するすべてのサーバがサーバのリストに表示されていることを確認します。
. *[Create Cluster (クラスタを作成)]* をクリックします。どの状況のサーバでもクラスタに追加できます。
+
image::serverstatus-no-cluster-allonline.png[すべてのサーバ]

. ​*[Create a Cluster (クラスタを作成)]*​ダイアログで、以下の手順を実行します。 +
.. クラスタの名前を入力します。
+
クラスタ名には次の要件があります。
+
* ダッシュを先頭または末尾で使用してはならない
* 3 ～ 40 文字である
* 一意である
* 文字、数字、ダッシュのみを含む
.. ​*[Unicast (ユニキャスト)]*​または​*[Multicast (マルチキャスト)]*​を選択します。
.. サーバのリストでクラスタに追加するサーバを選択して ​*[Create Cluster (クラスタを作成)]*​を選択します。 +
サーバリストにクラスタが表示されます。 
. クラスタ名をクリックして、クラスタの詳細を表示します。クラスタの詳細ページで ​*[Actions (アクション)]*​ドロップダウンをクリックすると、以下の操作を実行できます。 +
* クラスタからサーバを​*削除*​する
* クラスタのサーバを​*再起動*​する
* クラスタのサーバを​*シャットダウン*​する
* クラスタのサーバの​*証明書を更新*​する

== 関連情報:

* xref:cluster-about.adoc[クラスタについて]
* xref:mule-runtime::creating-and-managing-a-cluster-manually.adoc#object-store-persistence[オブジェクトストアの永続性]
* xref:mule-runtime::creating-and-managing-a-cluster-manually.adoc#quorum-management[クォーラム管理]
