= フローメトリクス
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: cloudhub, 分析, 監視, インサイト, filter

オンプレミスのサーバにデプロイされたアプリケーション (ハイブリッドまたは Anypoint Platform Private Cloud Edition) の個々のフローのパフォーマンスメトリクスの推移を表示できます。

== ハイブリッドでのフローメトリクスの有効化

ハイブリッドデプロイメント環境に新しいアプリケーションをデプロイすると、デフォルトではフローメトリクス機能は有効になっていません。フローメトリクスを有効にするには、アカウントに次のいずれかの権限が付与されている必要があります。

* *Manage Application Data (アプリケーションデータの管理)*
* *Create Applications (アプリケーションの作成)*
* *Manage Settings (設定の管理)*

フローメトリクスを有効にする手順は、次のとおりです。

. Runtime Manager から、*[Applications (アプリケーション)]* をクリックします。
. フローメトリクスを有効にするアプリケーションを選択し、*[Manage Application (アプリケーションを管理)]* をクリックします。
. *[Settings (設定)]* をクリックし、*[Flow Monitoring (フローの監視)]* タブを選択します。
+
image::flow-metrics-enable.png[]
. *[Enabled (有効)]* を選択します。
. *[Apply Changes (変更を適用)]* をクリックします。

== フローメトリクスへのアクセス

フローメトリクスを表示するには、目的のアプリケーションに対する「Read Application (アプリケーションの参照)」権限が必要です。

. Runtime Manager で、*[Applications (アプリケーション)]* タブを選択します。
. 実行中のアプリケーションの設定を入力 (サイドパネルで *[Manage Application (アプリケーションを管理)]* ボタンをクリックするか、テーブル内のアプリケーション名自体をクリック) します。
. 左のサイドバーで *[Flows (フロー)]* タブを選択します。
. 1 つ以上のフローを選択します。
+
image::flow-metrics-c8f9d.png[]

== サーバ状況の確認

アプリケーションがクラスタまたはサーバグループにデプロイされている場合、アプリケーションが実行されている各サーバでのフローの状況を表示できます。

image::flow-metrics-86a1a.png[]

この情報を使用して、サーバ間での状態の不整合につながる通信の問題がないことを確認できます。

== フローメトリクスの表示

1 つ以上のフローを選択したら、*[Metrics (メトリクス)]* タブを表示できます。

image::flow-metrics-e26c4.png[]

このタブには、次の 3 つのメトリクスのグラフが含まれています。

* Mule messages (Mule メッセージ)
* Errors (エラー)
* Flow response time (フローの応答時間)

すべてのメトリクスは、選択した時間単位に対して相対的な平均として表示されます。

[NOTE]
フローメトリクスの保持期間は 2 週間です。

== メトリクスの操作

すべてのグラフは、右上隅にある目的の期間を選択することで、異なる時間単位で表示できます。

image::flow-metrics-801cc.png[]

アプリケーションがクラスタまたはサーバグループで実行されている場合、サーバセット全体の集計メトリクスが 1 本の折れ線として表示されます。

グラフの任意の点にマウスポインタを置くことで、その時点のアクティビティに関する数値の詳細がフロート表示されます。

image::flow-metrics-c2b16.png[]

いずれかのメトリクスが長時間にわたって重大値に達した場合に自動的に通知されるようにアラートをセットアップできます。



== 関連情報

* xref:alerts-on-runtime-manager.adoc[アラート]
* xref:insight.adoc[インサイト]
* xref:flow-management.adoc[フロー管理]
* xref:monitoring.adoc[アプリケーションの監視]
